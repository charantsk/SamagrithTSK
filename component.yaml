name: flask-cms-api
version: 1.0.0
description: A Flask-based CMS API with resource and job management.
platform: python
runtime: python3.8
components:
  - name: flask-cms-api
    type: docker
    image: flask-cms-api:latest  # Use the built Docker image name
    environment:
      FLASK_APP: app.py
      FLASK_ENV: development
      DATABASE_URI: sqlite:///database.db
    ports:
      - "5000:5000"  # Exposing the Flask app on port 5000
    volumes:
      - name: static-volume
        path: /app/static
      - name: db-volume
        path: /app/database.db

    dependencies:
      - name: flask
        version: 2.0.2
      - name: flask-sqlalchemy
        version: 2.5.1
      - name: flask-cors
        version: 3.1.1
      - name: werkzeug
        version: 2.0.2
      - name: Pillow
        version: 8.4.0

volumes:
  static-volume:
    type: persistent
    size: 1Gi  # You can adjust the size depending on your needs
  db-volume:
    type: persistent
    size: 2Gi  # Size for database persistence

resources:
  - name: database
    type: file
    path: ./database.db
    size: 2Gi

deployment:
  replicas: 1
  autoScale: false
