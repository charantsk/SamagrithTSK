# +required The configuration file schema version
schemaVersion: 1.1

# +optional Incoming connection details for the component
endpoints:
  - name: flask-cms-api
    displayName: Flask CMS API
    service:
      basePath: /api
      port: 5000
    type: REST
    networkVisibilities: 
      - Public
      - Organization
    # Optional, add schema if needed
    schemaFilePath: openapi.yaml

# +optional Outgoing connection details for the component.
dependencies:
  # +optional Defines the connection references from the Internal Marketplace.
  connectionReferences:
    - name: resource-db-connection
      resourceRef: service:/DatabaseComponent/SQLDatabase/v1/xyz123/PUBLIC

# +optional Defines runtime configurations
configuration:
  # +optional List of environment variables to be injected into the component.
  env:
    - name: FLASK_APP
      value: app.py
    - name: FLASK_ENV
      value: development
    - name: DATABASE_URI
      value: sqlite:///database.db
    - name: STATIC_FOLDER
      value: /app/static/images
    - name: THUMBNAIL_SIZE
      value: "200,200"

volumes:
  - name: static-volume
    type: persistent
    size: 1Gi  # Adjust size as needed for static files
  - name: db-volume
    type: persistent
    size: 2Gi  # Size for SQLite database

resources:
  - name: database
    type: file
    path: ./database.db
    size: 2Gi  # Size for the database file

deployment:
  replicas: 1
  autoScale: false
